# ç¯å¢ƒé…ç½®æŒ‡å—

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç» MiniMind çš„ç¯å¢ƒé…ç½®å’Œå®‰è£…æ­¥éª¤ï¼ŒåŒ…æ‹¬å¯¹æœ€æ–° GPU æ¶æ„çš„æ”¯æŒã€‚

---

## ç›®å½•

1. [ç³»ç»Ÿè¦æ±‚](#ç³»ç»Ÿè¦æ±‚)
2. [GPU æ¶æ„æ”¯æŒ](#gpu-æ¶æ„æ”¯æŒ)
3. [Python ç¯å¢ƒ](#python-ç¯å¢ƒ)
4. [PyTorch å®‰è£…](#pytorch-å®‰è£…)
5. [ä¾èµ–å®‰è£…](#ä¾èµ–å®‰è£…)
6. [éªŒè¯å®‰è£…](#éªŒè¯å®‰è£…)
7. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ç³»ç»Ÿè¦æ±‚

### ç¡¬ä»¶è¦æ±‚

| ç»„ä»¶ | æœ€ä½è¦æ±‚ | æ¨èé…ç½® |
|------|----------|----------|
| CPU | 4 æ ¸ | 8 æ ¸+ |
| å†…å­˜ | 16GB | 32GB+ |
| GPU | 8GB æ˜¾å­˜ | 16GB+ æ˜¾å­˜ |
| å­˜å‚¨ | 50GB | 100GB+ SSD |

### è½¯ä»¶è¦æ±‚

| è½¯ä»¶ | æœ€ä½ç‰ˆæœ¬ | æ¨èç‰ˆæœ¬ | è¯´æ˜ |
|------|----------|----------|------|
| æ“ä½œç³»ç»Ÿ | Linux / Windows / macOS | Ubuntu 22.04 / Windows 11 | - |
| Python | 3.9 | 3.10-3.11 | 3.12 å¯èƒ½æœ‰å…¼å®¹æ€§é—®é¢˜ |
| CUDA | 11.8 | 12.4+ | Blackwell éœ€è¦ 12.8+ |
| cuDNN | 8.6 | 9.0+ | - |
| NVIDIA é©±åŠ¨ | 525+ | 560+ | Blackwell éœ€è¦ 570+ |

---

## GPU æ¶æ„æ”¯æŒ

MiniMind æ”¯æŒä» Volta åˆ°æœ€æ–° Blackwell çš„æ‰€æœ‰ NVIDIA GPU æ¶æ„ã€‚

### æ¶æ„å¯¹ç…§è¡¨

| GPU æ¶æ„ | è®¡ç®—èƒ½åŠ› | ä»£è¡¨å‹å· | CUDA ç‰ˆæœ¬ | PyTorch ç‰ˆæœ¬ | é©±åŠ¨ç‰ˆæœ¬ |
|----------|----------|----------|-----------|--------------|----------|
| **Blackwell** | sm_120 | RTX 5090, RTX 5080 | **12.8+** | **2.7+** | **570+** |
| Hopper | sm_90 | H100, H200 | 12.0+ | 2.2+ | 530+ |
| Ada Lovelace | sm_89 | RTX 4090, RTX 4080 | 11.8+ | 2.0+ | 525+ |
| Ampere | sm_80/86 | RTX 3090, A100 | 11.1+ | 1.9+ | 465+ |
| Turing | sm_75 | RTX 2080, T4 | 10.2+ | 1.6+ | 440+ |
| Volta | sm_70 | V100 | 10.0+ | 1.4+ | 410+ |

### Blackwell æ¶æ„ç‰¹åˆ«è¯´æ˜

> âš ï¸ **é‡è¦**: RTX 5090/5080 ç­‰ Blackwell æ¶æ„ GPU éœ€è¦ç‰¹å®šçš„è½¯ä»¶ç‰ˆæœ¬ï¼

**Blackwell (sm_120) æœ€ä½è¦æ±‚**:
- CUDA 12.8 æˆ–æ›´é«˜
- PyTorch 2.7.0 æˆ–æ›´é«˜ï¼ˆæ¨èä½¿ç”¨ nightly ç‰ˆæœ¬ï¼‰
- NVIDIA é©±åŠ¨ 570 æˆ–æ›´é«˜
- cuDNN 9.0 æˆ–æ›´é«˜

**å®‰è£… Blackwell æ”¯æŒçš„ PyTorch**:

```bash
# æ–¹æ¡ˆä¸€ï¼šå…ˆå°è¯•æ¸…åæºï¼ˆæ¨èï¼Œé€Ÿåº¦å¿«ï¼‰
pip install torch torchvision torchaudio

# å¦‚æœæ¸…åæºæ²¡æœ‰ PyTorch 2.7+ï¼Œä½¿ç”¨å®˜æ–¹ nightly ç‰ˆæœ¬
pip install --pre torch torchvision torchaudio --index-url https://download.pytorch.org/whl/nightly/cu128

# éªŒè¯ç‰ˆæœ¬ï¼ˆå¿…é¡» >= 2.7ï¼‰
python -c "import torch; print(f'PyTorch: {torch.__version__}, CUDA: {torch.version.cuda}')"
```

> ğŸ’¡ **æç¤º**ï¼šæ¸…åæºé€šå¸¸ä¼šåœ¨ PyTorch æ­£å¼å‘å¸ƒåå¿«é€ŸåŒæ­¥ã€‚å¦‚æœ 2.7 å·²æ­£å¼å‘å¸ƒï¼Œä¼˜å…ˆä½¿ç”¨æ¸…åæºã€‚

### æ£€æŸ¥ GPU æ¶æ„

```python
import torch

if torch.cuda.is_available():
    device = torch.cuda.current_device()
    major, minor = torch.cuda.get_device_capability(device)
    name = torch.cuda.get_device_name(device)
    
    print(f"GPU: {name}")
    print(f"è®¡ç®—èƒ½åŠ›: {major}.{minor}")
    
    # æ¶æ„åˆ¤æ–­
    if major >= 12:
        print("æ¶æ„: Blackwell (éœ€è¦ CUDA 12.8+, PyTorch 2.6+)")
    elif major >= 9:
        print("æ¶æ„: Hopper")
    elif major == 8 and minor >= 9:
        print("æ¶æ„: Ada Lovelace")
    elif major >= 8:
        print("æ¶æ„: Ampere")
    elif major >= 7 and minor >= 5:
        print("æ¶æ„: Turing")
    elif major >= 7:
        print("æ¶æ„: Volta")
```

---

## é•œåƒæºé…ç½®ï¼ˆæ¨èä¼˜å…ˆé…ç½®ï¼‰

ä¸ºäº†åŠ é€Ÿä¸‹è½½ï¼Œå»ºè®®å…ˆé…ç½®å›½å†…é•œåƒæºã€‚

### pip é•œåƒæºé…ç½®

#### ä¸´æ—¶ä½¿ç”¨ï¼ˆå•æ¬¡å®‰è£…ï¼‰

```bash
pip install package_name -i https://pypi.tuna.tsinghua.edu.cn/simple
```

#### æ°¸ä¹…é…ç½®ï¼ˆæ¨èï¼‰

**Linux/macOS**:
```bash
mkdir -p ~/.pip
cat > ~/.pip/pip.conf << EOF
[global]
index-url = https://pypi.tuna.tsinghua.edu.cn/simple
trusted-host = pypi.tuna.tsinghua.edu.cn
EOF
```

**Windows**:
```powershell
# åˆ›å»ºé…ç½®æ–‡ä»¶ç›®å½•
mkdir $env:APPDATA\pip -Force

# åˆ›å»ºé…ç½®æ–‡ä»¶
@"
[global]
index-url = https://pypi.tuna.tsinghua.edu.cn/simple
trusted-host = pypi.tuna.tsinghua.edu.cn
"@ | Out-File -FilePath $env:APPDATA\pip\pip.ini -Encoding utf8
```

**é…ç½®åçš„æ•ˆæœ**ï¼š
- âœ… æ‰€æœ‰ `pip install` å‘½ä»¤è‡ªåŠ¨ä½¿ç”¨æ¸…åæº
- âœ… ä¸éœ€è¦æ¯æ¬¡éƒ½åŠ  `-i` å‚æ•°
- âœ… ä¸‹è½½é€Ÿåº¦æ˜¾è‘—æå‡

### å¸¸ç”¨é•œåƒæº

| é•œåƒæº | PyPI åœ°å€ | PyTorch åœ°å€ |
|--------|-----------|--------------|
| æ¸…å | https://pypi.tuna.tsinghua.edu.cn/simple | https://mirrors.tuna.tsinghua.edu.cn/pytorch-wheels/ |
| é˜¿é‡Œäº‘ | https://mirrors.aliyun.com/pypi/simple | - |
| ä¸­ç§‘å¤§ | https://pypi.mirrors.ustc.edu.cn/simple | - |
| è±†ç“£ | https://pypi.douban.com/simple | - |

> ğŸ’¡ **æç¤º**ï¼šæ¸…åæºæœ‰ä¸“é—¨çš„ PyTorch é•œåƒï¼Œä¸‹è½½é€Ÿåº¦æ¯”å®˜æ–¹æºå¿«å¾ˆå¤šï¼

---

## Python ç¯å¢ƒ

### ä½¿ç”¨ uvï¼ˆæ¨èï¼Œæœ€å¿«ï¼‰

[uv](https://github.com/astral-sh/uv) æ˜¯ä¸€ä¸ªæé€Ÿçš„ Python åŒ…ç®¡ç†å™¨ï¼Œæ¯” pip å¿« 10-100 å€ã€‚

**å®‰è£… uv**:

```bash
# Linux/macOS
curl -LsSf https://astral.sh/uv/install.sh | sh

# Windows (PowerShell)
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"

# æˆ–ä½¿ç”¨ pip å®‰è£…ï¼ˆé…ç½®æ¸…åæºåï¼‰
pip install uv
```

**ä½¿ç”¨ uv åˆ›å»ºç¯å¢ƒå¹¶å®‰è£…ä¾èµ–**:

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
uv venv minimind --python 3.10

# æ¿€æ´»ç¯å¢ƒï¼ˆLinux/macOSï¼‰
source minimind/bin/activate

# æ¿€æ´»ç¯å¢ƒï¼ˆWindowsï¼‰
minimind\Scripts\activate

# å®‰è£… PyTorchï¼ˆæ ¹æ® GPU æ¶æ„é€‰æ‹©ï¼‰
# é€šç”¨æ–¹å¼ï¼ˆæ¨èï¼‰ï¼šå·²é…ç½®æ¸…åæºåï¼Œè‡ªåŠ¨ä½¿ç”¨æ¸…åæº
uv pip install torch torchvision torchaudio

# ç‰¹æ®Šæƒ…å†µï¼šBlackwell (RTX 5090/5080) å¦‚æœæ¸…åæºæ²¡æœ‰ 2.7+ï¼Œä½¿ç”¨å®˜æ–¹ nightly
# uv pip install --pre torch torchvision torchaudio --index-url https://download.pytorch.org/whl/nightly/cu128

# å®‰è£…é¡¹ç›®ä¾èµ–ï¼ˆå·²é…ç½®æ¸…åæºåï¼Œè‡ªåŠ¨ä½¿ç”¨æ¸…åæºï¼‰
uv pip install -r requirements.txt
```

**uv çš„ä¼˜åŠ¿**:
- ğŸš€ å®‰è£…é€Ÿåº¦æ¯” pip å¿« 10-100 å€
- ğŸ“¦ è‡ªåŠ¨è§£å†³ä¾èµ–å†²çª
- ğŸ”’ æ›´å¥½çš„ä¾èµ–é”å®š
- ğŸ’¾ å…¨å±€ç¼“å­˜ï¼ŒèŠ‚çœç£ç›˜ç©ºé—´

### ä½¿ç”¨ Conda

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
conda create -n minimind python=3.10 -y

# æ¿€æ´»ç¯å¢ƒ
conda activate minimind
```

### ä½¿ç”¨ venv

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv minimind_env

# æ¿€æ´»ç¯å¢ƒï¼ˆLinux/macOSï¼‰
source minimind_env/bin/activate

# æ¿€æ´»ç¯å¢ƒï¼ˆWindowsï¼‰
minimind_env\Scripts\activate
```

---

## PyTorch å®‰è£…

> âš ï¸ **é‡è¦**ï¼šå»ºè®®å…ˆé…ç½®æ¸…åé•œåƒæºï¼ˆè§ä¸Šæ–‡ï¼‰ï¼Œå¯ä»¥æ˜¾è‘—æå‡ä¸‹è½½é€Ÿåº¦ï¼

æ ¹æ®ä½ çš„ GPU æ¶æ„å’Œ CUDA ç‰ˆæœ¬é€‰æ‹©åˆé€‚çš„å®‰è£…å‘½ä»¤ã€‚

### æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨æ¸…åé•œåƒæºï¼ˆæ¨èï¼Œé€Ÿåº¦å¿«ï¼‰

æ¸…åé•œåƒæºä¼šæ ¹æ®ç³»ç»Ÿ CUDA ç‰ˆæœ¬è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„ PyTorch ç‰ˆæœ¬ã€‚

```bash
# æ‰€æœ‰æ¶æ„é€šç”¨ï¼ˆä¼šè‡ªåŠ¨åŒ¹é…ç³»ç»Ÿ CUDA ç‰ˆæœ¬ï¼‰
pip install torch torchvision torchaudio

# å¦‚æœæœªé…ç½®å…¨å±€æ¸…åæºï¼Œä½¿ç”¨ä¸´æ—¶æº
pip install torch torchvision torchaudio -i https://pypi.tuna.tsinghua.edu.cn/simple
```

**ä¼˜ç‚¹**ï¼š
- âœ… ä¸‹è½½é€Ÿåº¦å¿«ï¼ˆå›½å†…æœåŠ¡å™¨ï¼‰
- âœ… å‘½ä»¤ç®€å•ï¼Œè‡ªåŠ¨åŒ¹é… CUDA ç‰ˆæœ¬
- âœ… å·²é…ç½®æ¸…åæºåä¸éœ€è¦é¢å¤–å‚æ•°

**æ³¨æ„**ï¼š
- âš ï¸ Blackwell (RTX 5090/5080) éœ€è¦ PyTorch 2.7+ nightly ç‰ˆæœ¬ï¼Œæ¸…åæºå¯èƒ½æ²¡æœ‰ï¼Œéœ€è¦ä½¿ç”¨å®˜æ–¹æº

### æ–¹æ¡ˆäºŒï¼šä½¿ç”¨å®˜æ–¹æºï¼ˆæŒ‡å®š CUDA ç‰ˆæœ¬ï¼‰

å¦‚æœéœ€è¦ç‰¹å®šçš„ CUDA ç‰ˆæœ¬æˆ– nightly ç‰ˆæœ¬ï¼Œä½¿ç”¨å®˜æ–¹æºã€‚

#### Blackwell æ¶æ„ (RTX 5090/5080)

```bash
# CUDA 12.8 (Blackwell å¿…éœ€ï¼Œä½¿ç”¨ nightly ç‰ˆæœ¬)
pip install --pre torch torchvision torchaudio --index-url https://download.pytorch.org/whl/nightly/cu128
```

#### Ada Lovelace / Hopper æ¶æ„ (RTX 4090/H100)

```bash
# CUDA 12.4ï¼ˆæ¨èä½¿ç”¨æ¸…åæºï¼‰
pip install torch torchvision torchaudio

# æˆ–æŒ‡å®šå®˜æ–¹ CUDA 12.4 ç‰ˆæœ¬
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu124

# CUDA 12.1
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121
```

#### Ampere æ¶æ„ (RTX 3090/A100)

```bash
# æ¨èä½¿ç”¨æ¸…åæºï¼ˆè‡ªåŠ¨åŒ¹é…ï¼‰
pip install torch torchvision torchaudio

# æˆ–æŒ‡å®šå®˜æ–¹ CUDA 12.1
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121

# CUDA 11.8
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118
```

#### Turing / Volta æ¶æ„ (RTX 2080/V100)

```bash
# æ¨èä½¿ç”¨æ¸…åæº
pip install torch torchvision torchaudio

# æˆ–æŒ‡å®šå®˜æ–¹ CUDA 11.8
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118
```

#### CPU ç‰ˆæœ¬

```bash
# ä½¿ç”¨æ¸…åæº
pip install torch torchvision torchaudio

# æˆ–æŒ‡å®š CPU ç‰ˆæœ¬
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cpu
```

### å®‰è£…è¯´æ˜

**å…³äº `--index-url` å‚æ•°**ï¼š
- ä½¿ç”¨ `--index-url` ä¼š**è¦†ç›–**å…¨å±€é…ç½®çš„æ¸…åæºï¼Œç›´æ¥ä»æŒ‡å®šçš„å®˜æ–¹æºä¸‹è½½
- å¦‚æœå·²é…ç½®æ¸…åæºï¼Œä¸åŠ  `--index-url` åˆ™ä½¿ç”¨æ¸…åæºï¼ˆé€Ÿåº¦æ›´å¿«ï¼‰
- Blackwell ç­‰ç‰¹æ®Šç‰ˆæœ¬å»ºè®®ä½¿ç”¨å®˜æ–¹æºä»¥è·å–æœ€æ–°ç‰ˆæœ¬

### ç‰ˆæœ¬å¯¹ç…§è¡¨

| CUDA ç‰ˆæœ¬ | PyTorch ç‰ˆæœ¬ | æ”¯æŒçš„æ¶æ„ |
|-----------|--------------|------------|
| 12.8 | 2.7+ (nightly) | Blackwell, Hopper, Ada, Ampere, Turing, Volta |
| 12.4 | 2.4+ | Hopper, Ada, Ampere, Turing, Volta |
| 12.1 | 2.1+ | Hopper, Ada, Ampere, Turing, Volta |
| 11.8 | 2.0+ | Ada, Ampere, Turing, Volta |

---

## ä¾èµ–å®‰è£…

### åŸºç¡€å®‰è£…

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/jingyaogong/minimind.git
cd minimind

# å®‰è£…ä¾èµ–ï¼ˆå·²é…ç½®æ¸…åæºåï¼Œè‡ªåŠ¨ä½¿ç”¨æ¸…åæºï¼‰
pip install -r requirements.txt

# å¦‚æœæœªé…ç½®å…¨å±€æºï¼Œä¸´æ—¶ä½¿ç”¨æ¸…åæº
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

### requirements.txt å†…å®¹

```
torch>=2.0.0
transformers>=4.35.0
tokenizers>=0.15.0
numpy>=1.24.0
tqdm>=4.65.0
safetensors>=0.4.0
```

### å¯é€‰ä¾èµ–

```bash
# wandb/swanlabï¼ˆè®­ç»ƒæ—¥å¿—ï¼‰
pip install swanlab

# Flash Attentionï¼ˆéœ€è¦ CUDAï¼Œæ˜¾è‘—æå‡æ€§èƒ½ï¼‰
pip install flash-attn --no-build-isolation

# Gradioï¼ˆWeb ç•Œé¢ï¼‰
pip install gradio

# FastAPIï¼ˆAPI éƒ¨ç½²ï¼‰
pip install fastapi uvicorn
```

### Flash Attention å®‰è£…

Flash Attention å¯ä»¥æ˜¾è‘—æå‡è®­ç»ƒå’Œæ¨ç†é€Ÿåº¦ï¼Œä½†å®‰è£…å¯èƒ½éœ€è¦ç¼–è¯‘ã€‚

```bash
# æ ‡å‡†å®‰è£…
pip install flash-attn --no-build-isolation

# å¦‚æœç¼–è¯‘å¤±è´¥ï¼Œå°è¯•é¢„ç¼–è¯‘ç‰ˆæœ¬
pip install flash-attn --no-build-isolation --no-cache-dir

# Blackwell æ¶æ„å¯èƒ½éœ€è¦ä»æºç ç¼–è¯‘
git clone https://github.com/Dao-AILab/flash-attention.git
cd flash-attention
pip install .
```

---

## éªŒè¯å®‰è£…

### å®Œæ•´éªŒè¯è„šæœ¬

```python
# test_install.py
import sys
print(f"Python ç‰ˆæœ¬: {sys.version}")

import torch
print(f"\nPyTorch ç‰ˆæœ¬: {torch.__version__}")
print(f"CUDA å¯ç”¨: {torch.cuda.is_available()}")

if torch.cuda.is_available():
    print(f"CUDA ç‰ˆæœ¬: {torch.version.cuda}")
    print(f"cuDNN ç‰ˆæœ¬: {torch.backends.cudnn.version()}")
    print(f"GPU æ•°é‡: {torch.cuda.device_count()}")
    
    for i in range(torch.cuda.device_count()):
        props = torch.cuda.get_device_properties(i)
        print(f"\nGPU {i}: {props.name}")
        print(f"  è®¡ç®—èƒ½åŠ›: {props.major}.{props.minor}")
        print(f"  æ˜¾å­˜: {props.total_memory / 1024**3:.1f} GB")
        
        # æ¶æ„åˆ¤æ–­
        if props.major >= 12:
            print(f"  æ¶æ„: Blackwell âœ…")
            if torch.version.cuda and float(torch.version.cuda.split('.')[0]) < 12.8:
                print(f"  âš ï¸ è­¦å‘Š: Blackwell éœ€è¦ CUDA 12.8+ï¼Œå½“å‰ {torch.version.cuda}")
        elif props.major >= 9:
            print(f"  æ¶æ„: Hopper âœ…")
        elif props.major == 8 and props.minor >= 9:
            print(f"  æ¶æ„: Ada Lovelace âœ…")
        elif props.major >= 8:
            print(f"  æ¶æ„: Ampere âœ…")
        elif props.major >= 7:
            print(f"  æ¶æ„: Turing/Volta âœ…")

# æµ‹è¯• Flash Attention
print("\næ£€æŸ¥ Flash Attention...")
try:
    from torch.nn.functional import scaled_dot_product_attention
    print("Flash Attention (SDPA): âœ… å¯ç”¨")
except ImportError:
    print("Flash Attention (SDPA): âŒ ä¸å¯ç”¨")

# æµ‹è¯•æ¨¡å‹åˆ›å»º
print("\næµ‹è¯•æ¨¡å‹åˆ›å»º...")
try:
    from model.model_minimind import MiniMindConfig, MiniMindForCausalLM
    config = MiniMindConfig(hidden_size=512, num_hidden_layers=8)
    model = MiniMindForCausalLM(config)
    print(f"æ¨¡å‹å‚æ•°é‡: {sum(p.numel() for p in model.parameters()) / 1e6:.2f}M âœ…")
except Exception as e:
    print(f"æ¨¡å‹åˆ›å»ºå¤±è´¥: {e}")

# æµ‹è¯• tokenizer
print("\næµ‹è¯• Tokenizer...")
try:
    from transformers import AutoTokenizer
    tokenizer = AutoTokenizer.from_pretrained('model')
    print(f"è¯è¡¨å¤§å°: {tokenizer.vocab_size} âœ…")
except Exception as e:
    print(f"Tokenizer åŠ è½½å¤±è´¥: {e}")

print("\n" + "="*50)
print("âœ… å®‰è£…éªŒè¯å®Œæˆï¼")
```

### è¿è¡ŒéªŒè¯

```bash
python test_install.py
```

### é¢„æœŸè¾“å‡ºç¤ºä¾‹

```
Python ç‰ˆæœ¬: 3.10.12

PyTorch ç‰ˆæœ¬: 2.6.0.dev20241201+cu128
CUDA å¯ç”¨: True
CUDA ç‰ˆæœ¬: 12.8
cuDNN ç‰ˆæœ¬: 90100
GPU æ•°é‡: 1

GPU 0: NVIDIA GeForce RTX 5090
  è®¡ç®—èƒ½åŠ›: 12.0
  æ˜¾å­˜: 32.0 GB
  æ¶æ„: Blackwell âœ…

æ£€æŸ¥ Flash Attention...
Flash Attention (SDPA): âœ… å¯ç”¨

æµ‹è¯•æ¨¡å‹åˆ›å»º...
æ¨¡å‹å‚æ•°é‡: 26.00M âœ…

æµ‹è¯• Tokenizer...
è¯è¡¨å¤§å°: 6400 âœ…

==================================================
âœ… å®‰è£…éªŒè¯å®Œæˆï¼
```

---

## å¸¸è§é—®é¢˜

### Q: Blackwell GPU æ— æ³•è¯†åˆ«ï¼Ÿ

A: ç¡®ä¿æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š
1. NVIDIA é©±åŠ¨ >= 570
2. CUDA >= 12.8
3. PyTorch >= 2.7 (nightly)

```bash
# æ£€æŸ¥é©±åŠ¨ç‰ˆæœ¬
nvidia-smi

# å®‰è£…æœ€æ–°é©±åŠ¨
# Linux: ä» NVIDIA å®˜ç½‘ä¸‹è½½
# Windows: ä½¿ç”¨ GeForce Experience æ›´æ–°
```

### Q: CUDA ç‰ˆæœ¬ä¸åŒ¹é…ï¼Ÿ

A: PyTorch çš„ CUDA ç‰ˆæœ¬éœ€è¦ä¸ç³»ç»Ÿ CUDA å…¼å®¹ï¼š

```bash
# æŸ¥çœ‹ç³»ç»Ÿ CUDA ç‰ˆæœ¬
nvcc --version

# æŸ¥çœ‹ PyTorch CUDA ç‰ˆæœ¬
python -c "import torch; print(torch.version.cuda)"

# å¦‚æœä¸åŒ¹é…ï¼Œé‡æ–°å®‰è£…æ­£ç¡®ç‰ˆæœ¬çš„ PyTorch
pip uninstall torch torchvision torchaudio

# æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨æ¸…åæºï¼ˆæ¨èï¼Œè‡ªåŠ¨åŒ¹é…ç³»ç»Ÿ CUDAï¼‰
pip install torch torchvision torchaudio

# æ–¹æ¡ˆäºŒï¼šä½¿ç”¨å®˜æ–¹æºæŒ‡å®š CUDA ç‰ˆæœ¬
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu124
```

### Q: Flash Attention å®‰è£…å¤±è´¥ï¼Ÿ

A: å¸¸è§è§£å†³æ–¹æ¡ˆï¼š

```bash
# 1. ç¡®ä¿æœ‰ç¼–è¯‘å·¥å…·
# Linux
sudo apt install build-essential

# 2. ä½¿ç”¨é¢„ç¼–è¯‘ç‰ˆæœ¬
pip install flash-attn --no-build-isolation

# 3. å¦‚æœä»ç„¶å¤±è´¥ï¼Œå¯ä»¥ç¦ç”¨ Flash Attention
# åœ¨ä»£ç ä¸­è®¾ç½® flash_attn=False
```

### Q: æ˜¾å­˜ä¸è¶³ï¼Ÿ

A: è§£å†³æ–¹æ¡ˆï¼š
1. å‡å° `batch_size`
2. ä½¿ç”¨æ¢¯åº¦ç´¯ç§¯ `--accumulation_steps`
3. ä½¿ç”¨æ›´å°çš„æ¨¡å‹ `--hidden_size 512`
4. ä½¿ç”¨æ··åˆç²¾åº¦ `--dtype bfloat16`

### Q: Windows ä¸Šçš„é—®é¢˜ï¼Ÿ

A: å»ºè®®ä½¿ç”¨ WSL2ï¼š

```powershell
# å®‰è£… WSL2
wsl --install -d Ubuntu-22.04

# åœ¨ WSL2 ä¸­å®‰è£… CUDA
# å‚è€ƒ NVIDIA å®˜æ–¹ WSL2 æ–‡æ¡£
```

### Q: å¦‚ä½•æ£€æŸ¥ GPU æ˜¯å¦è¢«æ­£ç¡®ä½¿ç”¨ï¼Ÿ

A: ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç›‘æ§ï¼š

```bash
# å®æ—¶ç›‘æ§ GPU ä½¿ç”¨
watch -n 1 nvidia-smi

# æˆ–ä½¿ç”¨ Python
python -c "import torch; print(torch.cuda.memory_summary())"
```

---

## ç¯å¢ƒé…ç½®é€ŸæŸ¥è¡¨

### ä½¿ç”¨ uvï¼ˆæ¨èï¼Œæœ€å¿«ï¼‰

> ğŸ’¡ **æç¤º**ï¼šä»¥ä¸‹å‘½ä»¤å‡è®¾å·²é…ç½®æ¸…åé•œåƒæºï¼Œä¸‹è½½é€Ÿåº¦æ›´å¿«ï¼

#### Blackwell (RTX 5090/5080)

```bash
# 1. å®‰è£… uv
curl -LsSf https://astral.sh/uv/install.sh | sh

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
uv venv minimind --python 3.10

# 3. æ¿€æ´»ç¯å¢ƒ
source minimind/bin/activate  # Windows: minimind\Scripts\activate

# 4. å®‰è£… PyTorchï¼ˆå…ˆå°è¯•æ¸…åæºï¼‰
uv pip install torch torchvision torchaudio

# éªŒè¯ç‰ˆæœ¬ï¼ˆBlackwell éœ€è¦ PyTorch 2.7+ï¼‰
python -c "import torch; print(torch.__version__)"

# å¦‚æœç‰ˆæœ¬ < 2.7ï¼Œå®‰è£…å®˜æ–¹ nightly ç‰ˆæœ¬
# uv pip install --pre torch torchvision torchaudio --index-url https://download.pytorch.org/whl/nightly/cu128

# 5. å®‰è£…é¡¹ç›®ä¾èµ–
uv pip install -r requirements.txt
```

#### Ada Lovelace (RTX 4090/4080)

```bash
# 1. åˆ›å»ºå¹¶æ¿€æ´»ç¯å¢ƒ
uv venv minimind --python 3.10
source minimind/bin/activate

# 2. å®‰è£… PyTorchï¼ˆä½¿ç”¨æ¸…åæºï¼Œé€Ÿåº¦å¿«ï¼‰
uv pip install torch torchvision torchaudio

# 3. å®‰è£…é¡¹ç›®ä¾èµ–
uv pip install -r requirements.txt
```

#### Ampere (RTX 3090/A100)

```bash
# 1. åˆ›å»ºå¹¶æ¿€æ´»ç¯å¢ƒ
uv venv minimind --python 3.10
source minimind/bin/activate

# 2. å®‰è£… PyTorchï¼ˆä½¿ç”¨æ¸…åæºï¼‰
uv pip install torch torchvision torchaudio

# 3. å®‰è£…é¡¹ç›®ä¾èµ–
uv pip install -r requirements.txt
```

#### CPU Only

```bash
# 1. åˆ›å»ºå¹¶æ¿€æ´»ç¯å¢ƒ
uv venv minimind --python 3.10
source minimind/bin/activate

# 2. å®‰è£… PyTorchï¼ˆä½¿ç”¨æ¸…åæºï¼‰
uv pip install torch torchvision torchaudio

# 3. å®‰è£…é¡¹ç›®ä¾èµ–
uv pip install -r requirements.txt
```

---

### ä½¿ç”¨ Conda

> ğŸ’¡ **æç¤º**ï¼šä»¥ä¸‹å‘½ä»¤å‡è®¾å·²é…ç½®æ¸…åé•œåƒæºï¼Œä¸‹è½½é€Ÿåº¦æ›´å¿«ï¼

#### Blackwell (RTX 5090/5080)

```bash
# 1. åˆ›å»ºå¹¶æ¿€æ´»ç¯å¢ƒ
conda create -n minimind python=3.10 -y
conda activate minimind

# 2. å®‰è£… PyTorchï¼ˆå…ˆå°è¯•æ¸…åæºï¼‰
pip install torch torchvision torchaudio

# éªŒè¯ç‰ˆæœ¬ï¼ˆBlackwell éœ€è¦ PyTorch 2.7+ï¼‰
python -c "import torch; print(torch.__version__)"

# å¦‚æœç‰ˆæœ¬ < 2.7ï¼Œå®‰è£…å®˜æ–¹ nightly ç‰ˆæœ¬
# pip install --pre torch torchvision torchaudio --index-url https://download.pytorch.org/whl/nightly/cu128

# 3. å®‰è£…é¡¹ç›®ä¾èµ–
pip install -r requirements.txt
```

#### Ada Lovelace (RTX 4090/4080)

```bash
# 1. åˆ›å»ºå¹¶æ¿€æ´»ç¯å¢ƒ
conda create -n minimind python=3.10 -y
conda activate minimind

# 2. å®‰è£… PyTorchï¼ˆä½¿ç”¨æ¸…åæºï¼Œé€Ÿåº¦å¿«ï¼‰
pip install torch torchvision torchaudio

# 3. å®‰è£…é¡¹ç›®ä¾èµ–
pip install -r requirements.txt
```

#### Ampere (RTX 3090/A100)

```bash
# 1. åˆ›å»ºå¹¶æ¿€æ´»ç¯å¢ƒ
conda create -n minimind python=3.10 -y
conda activate minimind

# 2. å®‰è£… PyTorchï¼ˆä½¿ç”¨æ¸…åæºï¼‰
pip install torch torchvision torchaudio

# 3. å®‰è£…é¡¹ç›®ä¾èµ–
pip install -r requirements.txt
```

#### CPU Only

```bash
# 1. åˆ›å»ºå¹¶æ¿€æ´»ç¯å¢ƒ
conda create -n minimind python=3.10 -y
conda activate minimind

# 2. å®‰è£… PyTorchï¼ˆä½¿ç”¨æ¸…åæºï¼‰
pip install torch torchvision torchaudio

# 3. å®‰è£…é¡¹ç›®ä¾èµ–
pip install -r requirements.txt